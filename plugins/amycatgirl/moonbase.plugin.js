state.plugins.add({"namespace":"amycatgirl","id":"moonbase-tts","entrypoint":"async ()=>{var a=await new Promise(res=>setInterval(()=>window.controllers.client.getReadyClient&&res(window.controllers.client.getReadyClient()),5000)),c=document.createElement(\"audio\");let b=null;console.log(\"[moonbase-revolt/init] Trying to inject audio element...\");c.style=`\n    display: none;\n  `;c.id=\"moonbase\";document.body.appendChild(c);if(document.getElementById(\"moonbase\"))console.log(\"[moonbase-revolt/init] Injected!\");else throw Error(\"[moonbase-revolt/init] Failed to inject audio element, aborting...\");function d(A){var _=c||new Audio();console.log(\"[moonbase-revolt] Trying to play audio\");A!==b&&(_.src=`https://tts.cyzon.us/tts?text=${encodeURIComponent(A)}`,_.addEventListener(\"playing\",()=>b=A,{once:!0}));_.readyState>=2?_.play():_.addEventListener(\"canplay\",()=>_.play(),{once:!0})}console.log(\"[moonbase-revolt] Got Client\",a.user.username);a.on(\"message\",A=>{var _=location.pathname.match(/\\/channel\\/([\\dA-Z]{26})/)[0].substring(9);console.log(\"[moonbase-revolt] current channel\",_);console.log(\"[moonbase-revolt] Got message!\",A.content);A.content&&A.channel_id==_&&!A.content.includes(\"[](stoptts)\")&&d(a.markdownToText(A.content))});return{onUnload:()=>console.log(\"Unloaded!\")}};","version":"1.1.0"})
